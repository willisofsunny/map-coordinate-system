# 地圖座標系統轉換工具

一個功能完整的地圖座標系統轉換網頁應用，支持當前位置獲取、地址查詢和座標轉換功能。

## 🚀 快速開始

```bash
# 1. 下載項目文件
# 2. 運行本地服務器
python start-server.py

# 3. 瀏覽器會自動打開應用
# 4. 允許位置訪問權限即可使用所有功能
```

## 🌟 主要功能

- **獲取當前位置**：一鍵獲取您的當前地理位置和對應座標
- **地址查詢**：輸入地址獲取對應的WGS84和BD09座標
- **座標轉換**：支持WGS84（Google座標）和BD09座標之間的互相轉換
- **多格式顯示**：同時提供十進制度數和度分秒格式顯示

## 🚀 技術特性

- **純前端實現**：無需後端服務器，直接在瀏覽器中運行
- **響應式設計**：完美支持桌面和移動設備
- **現代化UI**：採用現代化設計風格，用戶體驗佳
- **高精度轉換**：使用精確的座標轉換算法
- **多重備份API**：使用多個地理編碼服務確保穩定性
- **詳細錯誤提示**：提供完整的錯誤診斷和解決建議

## 📋 支持的座標系統

- **WGS84**：世界大地測量系統1984，Google地圖、GPS等使用的標準座標系
- **BD09座標**：常用的座標系統，廣泛應用於各種地圖服務

## 🔧 使用方法

### 🎯 推薦方法：使用內建服務器（解決CORS問題）
```bash
# 使用提供的Python腳本（推薦）
python start-server.py

# 或使用Python內建HTTP服務器
python -m http.server 8000

# 或使用Node.js的http-server
npx http-server
```

### 📝 直接使用
1. 下載所有文件到本地
2. 用瀏覽器打開 `index.html` 即可使用
3. **注意**：某些瀏覽器可能因為CORS政策限制部分功能

### 🌐 線上部署
- 將文件上傳到支持HTTPS的網頁服務器
- 建議使用HTTPS協議以獲得最佳地理位置服務體驗

## 📱 功能說明

### 1. 獲取當前位置
- 點擊「獲取當前位置」按鈕
- 瀏覽器會請求位置權限
- 自動顯示當前地址和對應的WGS84、BD09座標

### 2. 地址查詢
- 在地址輸入框中輸入要查詢的地址
- 支持中文和英文地址
- 點擊「查詢座標」獲取結果

### 3. 座標轉換
- 輸入已知的經緯度
- 選擇輸入座標的系統（WGS84或BD09）
- 點擊「轉換座標」獲取另一座標系統的結果

## 🌍 適用範圍

本工具適用於：
- 地圖開發者
- GIS工程師
- 位置服務開發
- 地理數據處理
- 導航應用開發

## ⚠️ 注意事項

1. **位置權限**：使用當前位置功能需要授權瀏覽器訪問地理位置
2. **網絡連接**：地址查詢功能需要網絡連接訪問地理編碼API
3. **座標精度**：座標轉換精度通常在1-10米範圍內
4. **瀏覽器支持**：建議使用現代瀏覽器（Chrome、Firefox、Safari、Edge）
5. **HTTPS協議**：某些功能在HTTPS環境下工作更穩定

## 🔧 故障排除

### 🚫 無法獲取當前位置
**可能原因：**
- 瀏覽器未授權位置訪問
- GPS或定位服務未開啟
- 網絡連接問題

**解決方法：**
1. 點擊瀏覽器地址欄的位置圖標，選擇"允許"
2. 檢查設備的位置服務是否開啟
3. 嘗試在室外或靠近窗戶的位置
4. 使用HTTPS協議訪問頁面

### 🔍 地址查詢失敗
**可能原因：**
- 網絡連接問題
- 地址格式不正確
- API服務限制

**解決方法：**
1. 檢查網絡連接
2. 使用更詳細的地址（包含城市、街道等）
3. 嘗試使用中文或英文地址
4. 使用提供的服務器腳本（`python start-server.py`）

### 🌐 CORS錯誤
**解決方法：**
1. 使用提供的 `start-server.py` 腳本
2. 或使用其他本地HTTP服務器
3. 避免直接用瀏覽器打開文件（file://協議）

## 🧪 測試工具

項目包含一個專用的地址查詢測試工具：`test-geocoding.html`

### 使用測試工具
```bash
# 啟動服務器後，訪問測試工具
http://localhost:8000/test-geocoding.html
```

**測試工具功能：**
- 測試多個預設地址（台北101、東京塔等）
- 自定義地址測試
- 詳細的API調用日誌
- 實時顯示成功/失敗狀態
- 幫助診斷地址查詢問題

**如果地址查詢失敗，請：**
1. 先使用測試工具確認API是否正常
2. 檢查瀏覽器控制台的錯誤信息
3. 確保使用了本地服務器腳本
4. 嘗試不同格式的地址

## 📁 文件結構

```
MapCoordinateSystem/
├── index.html              # 主頁面
├── style.css              # 樣式文件
├── script.js              # 主程序邏輯
├── coordinate-converter.js # 座標轉換算法
├── start-server.py         # 本地測試服務器腳本
├── test-geocoding.html     # 地址查詢測試工具
└── README.md              # 說明文件
```

## 🔬 技術實現

- **HTML5 Geolocation API**：獲取當前位置，支持高精度定位
- **多重地理編碼API**：使用多個備份API確保服務穩定性
- **精確座標轉換算法**：WGS84與BD09座標之間的高精度轉換
- **現代JavaScript ES6+**：使用類、async/await、Promise等現代語法
- **CSS3動效**：漸變背景、過渡動畫、響應式布局
- **錯誤處理機制**：完整的錯誤捕獲和用戶友好的提示系統
- **CORS解決方案**：內建本地服務器腳本解決跨域問題

## 🎯 使用場景示例

1. **開發者調試**：快速獲取測試地點的不同座標系統座標
2. **數據轉換**：批量轉換地圖數據的座標系統
3. **位置驗證**：驗證GPS座標的準確性
4. **地圖集成**：為不同地圖API準備正確的座標格式

## 📞 技術支持

如遇到問題，請檢查：
- 瀏覽器是否支持地理位置API
- 網絡連接是否正常
- 是否授權了位置訪問權限
- 輸入的座標格式是否正確

## 📄 許可證

本項目採用 MIT 許可證，您可以自由使用、修改和分發。

---

**提示**：為獲得最佳體驗，建議在HTTPS環境下使用本工具，因為現代瀏覽器在HTTP環境下可能限制地理位置API的使用。 

## Geocoding API 代理（Node.js）

本專案提供 `server.js` 作為 Geocoding API 代理，避免 API Key 暴露於前端。

### 如何在 Render 部署
1. 新增 Web Service，選擇 Node.js。
2. 設定環境變數 `GEOCODING_API_KEY`，值為你的 Google Geocoding API Key。
3. 部署 `server.js`。

### 前端呼叫方式
將原本直接呼叫 Google API 的程式碼，改為：

```js
fetch('https://你的-render-domain.onrender.com/api/geocode?address=地址')
  .then(res => res.json())
  .then(data => { /* 處理結果 */ });
```

--- 